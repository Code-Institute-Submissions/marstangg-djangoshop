{"changed":true,"filter":false,"title":"payment.html","tooltip":"/templates/payment.html","value":"{% extends \"base.html\" %}\n\n{% block extra_head %}\n<style>\n\n#stripeBtnLabel {\n  font-family: \"Helvetica Neue\", Helvetica, sans-serif;\n  font-size: 16px;\n  font-variant: normal;\n  padding: 0;\n  margin: 0;\n  -webkit-font-smoothing: antialiased;\n  font-weight: 500;\n  display: block;\n}\n\n#stripeBtn {\n  border: none;\n  border-radius: 4px;\n  outline: none;\n  text-decoration: none;\n  color: #fff;\n  background: #32325d;\n  white-space: nowrap;\n  display: inline-block;\n  height: 40px;\n  line-height: 40px;\n  box-shadow: 0 4px 6px rgba(50, 50, 93, .11), 0 1px 3px rgba(0, 0, 0, .08);\n  border-radius: 4px;\n  font-size: 15px;\n  font-weight: 600;\n  letter-spacing: 0.025em;\n  text-decoration: none;\n  -webkit-transition: all 150ms ease;\n  transition: all 150ms ease;\n  float: left;\n  width: 100%\n}\n\nbutton:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 7px 14px rgba(50, 50, 93, .10), 0 3px 6px rgba(0, 0, 0, .08);\n  background-color: #43458b;\n}\n\n.stripe-form {\n  padding: 5px 30px;\n}\n\n#card-errors {\n  height: 20px;\n  padding: 4px 0;\n  color: #fa755a;\n}\n\n.stripe-form-row {\n  width: 100%;\n  float: left;\n  margin-top: 5px;\n  margin-bottom: 5px;\n}\n\n/**\n * The CSS shown here will not be introduced in the Quickstart guide, but shows\n * how you can use CSS to style your Element's container.\n */\n.StripeElement {\n  box-sizing: border-box;\n\n  height: 40px;\n\n  padding: 10px 12px;\n\n  border: 1px solid transparent;\n  border-radius: 4px;\n  background-color: white;\n\n  box-shadow: 0 1px 3px 0 #e6ebf1;\n  -webkit-transition: box-shadow 150ms ease;\n  transition: box-shadow 150ms ease;\n}\n\n.StripeElement--focus {\n  box-shadow: 0 1px 3px 0 #cfd7df;\n}\n\n.StripeElement--invalid {\n  border-color: #fa755a;\n}\n\n.StripeElement--webkit-autofill {\n  background-color: #fefde5 !important;\n}\n\n.current-card-form {\n  display: none;\n}\n\n</style>\n{% endblock extra_head %}\n\n{% block content %}\n\n  <main >\n    <div class=\"container wow fadeIn\">\n\n      <h2 class=\"my-5 h2 text-center\">Payment</h2>\n\n      <div class=\"row\">\n\n        <div class=\"col-md-12 mb-4\">\n          <div class=\"card\">\n\n            <script src=\"https://js.stripe.com/v3/\"></script>\n            {% if card %}\n              <div style=\"padding: 5px 30px;\">\n                <div class=\"custom-control custom-checkbox\">\n                  <input type=\"checkbox\" class=\"custom-control-input\" name=\"use_default_card\" id=\"use_default_card\">\n                  <label class=\"custom-control-label\" for=\"use_default_card\">Use default card:\n                    **** **** **** {{ card.last4 }} \n                  <span>Exp: {{ card.exp_month }}/{{ card.exp_year }}</span></label>\n                </div>\n              </div>\n            {% endif %}\n\n            <div class=\"current-card-form\">\n              <form action=\".\" method=\"post\" class=\"stripe-form\">\n                  {% csrf_token %}\n                  <input type=\"hidden\" name=\"use_default\" value=\"true\">\n                  <div class=\"stripe-form-row\">\n                    <button id=\"stripeBtn\">Submit Payment</button>\n                  </div>\n                  <div id=\"card-errors\" role=\"alert\"></div>\n              </form>\n            </div>\n\n            <div class=\"new-card-form\">\n              <form action=\".\" method=\"post\" class=\"stripe-form\" id=\"stripe-form\">\n                  {% csrf_token %}\n                  <div class=\"stripe-form-row\" id=\"creditCard\">\n                      <label for=\"card-element\" id=\"stripeBtnLabel\">\n                          Credit or debit card\n                      </label>\n                      <div id=\"card-element\" class=\"StripeElement StripeElement--empty\"><div class=\"__PrivateStripeElement\" style=\"margin: 0px !important; padding: 0px !important; border: none !important; display: block !important; background: transparent !important; position: relative !important; opacity: 1 !important;\"><iframe frameborder=\"0\" allowtransparency=\"true\" scrolling=\"no\" name=\"__privateStripeFrame5\" allowpaymentrequest=\"true\" src=\"https://js.stripe.com/v3/elements-inner-card-19066928f2ed1ba3ffada645e45f5b50.html#style[base][color]=%2332325d&amp;style[base][fontFamily]=%22Helvetica+Neue%22%2C+Helvetica%2C+sans-serif&amp;style[base][fontSmoothing]=antialiased&amp;style[base][fontSize]=16px&amp;style[base][::placeholder][color]=%23aab7c4&amp;style[invalid][color]=%23fa755a&amp;style[invalid][iconColor]=%23fa755a&amp;componentName=card&amp;wait=false&amp;rtl=false&amp;keyMode=test&amp;origin=https%3A%2F%2Fstripe.com&amp;referrer=https%3A%2F%2Fstripe.com%2Fdocs%2Fstripe-js&amp;controllerId=__privateStripeController1\" title=\"Secure payment input frame\" style=\"border: none !important; margin: 0px !important; padding: 0px !important; width: 1px !important; min-width: 100% !important; overflow: hidden !important; display: block !important; height: 19.2px;\"></iframe><input class=\"__PrivateStripeElement-input\" aria-hidden=\"true\" aria-label=\" \" autocomplete=\"false\" maxlength=\"1\" style=\"border: none !important; display: block !important; position: absolute !important; height: 1px !important; top: 0px !important; left: 0px !important; padding: 0px !important; margin: 0px !important; width: 100% !important; opacity: 0 !important; background: transparent !important; pointer-events: none !important; font-size: 16px !important;\"></div></div>\n                  </div>\n                  <div class=\"stripe-form-row\">\n                    <button id=\"stripeBtn\">Submit Payment</button>\n                  </div>\n                  <div class=\"stripe-form-row\">\n                    <div class=\"custom-control custom-checkbox\">\n                      <input type=\"checkbox\" class=\"custom-control-input\" name=\"save\" id=\"save_card_info\">\n                      <label class=\"custom-control-label\" for=\"save_card_info\">Save for future purchases</label>\n                    </div>\n                  </div>\n                  <div id=\"card-errors\" role=\"alert\"></div>\n              </form>\n            </div>\n\n          </div>\n        </div>\n\n        {% include \"order_snippet.html\" %}\n\n      </div>\n\n    </div>\n  </main>\n\n{% endblock content %}\n\n{% block extra_scripts %}\n\n<script nonce=\"\">  // Create a Stripe client.\n  var stripe = Stripe('รง');\n\n  // Create an instance of Elements.\n  var elements = stripe.elements();\n\n  // Custom styling can be passed to options when creating an Element.\n  // (Note that this demo uses a wider set of styles than the guide below.)\n  var style = {\n    base: {\n      color: '#32325d',\n      fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n      fontSmoothing: 'antialiased',\n      fontSize: '16px',\n      '::placeholder': {\n        color: '#aab7c4'\n      }\n    },\n    invalid: {\n      color: '#fa755a',\n      iconColor: '#fa755a'\n    }\n  };\n\n  // Create an instance of the card Element.\n  var card = elements.create('card', {style: style});\n\n  // Add an instance of the card Element into the `card-element` <div>.\n  card.mount('#card-element');\n\n  // Handle real-time validation errors from the card Element.\n  card.addEventListener('change', function(event) {\n    var displayError = document.getElementById('card-errors');\n    if (event.error) {\n      displayError.textContent = event.error.message;\n    } else {\n      displayError.textContent = '';\n    }\n  });\n\n  // Handle form submission.\n  var form = document.getElementById('stripe-form');\n  form.addEventListener('submit', function(event) {\n    event.preventDefault();\n\n    stripe.createToken(card).then(function(result) {\n      if (result.error) {\n        // Inform the user if there was an error.\n        var errorElement = document.getElementById('card-errors');\n        errorElement.textContent = result.error.message;\n      } else {\n        // Send the token to your server.\n        stripeTokenHandler(result.token);\n      }\n    });\n  });\n\n  // Submit the form with the token ID.\n  function stripeTokenHandler(token) {\n    // Insert the token ID into the form so it gets submitted to the server\n    var form = document.getElementById('stripe-form');\n    var hiddenInput = document.createElement('input');\n    hiddenInput.setAttribute('type', 'hidden');\n    hiddenInput.setAttribute('name', 'stripeToken');\n    hiddenInput.setAttribute('value', token.id);\n    form.appendChild(hiddenInput);\n\n    // Submit the form\n    form.submit();\n  }\n\n  var currentCardForm = $('.current-card-form');\n  var newCardForm = $('.new-card-form');\n  var use_default_card = document.querySelector(\"input[name=use_default_card]\");\n  use_default_card.addEventListener('change', function() {\n    if (this.checked) {\n      newCardForm.hide();\n      currentCardForm.show()\n    } else {\n      newCardForm.show();\n      currentCardForm.hide()\n    }\n  })\n\n</script>\n\n{% endblock extra_scripts %}\n\n\n\n\n","undoManager":{"mark":0,"position":1,"stack":[[{"start":{"row":173,"column":24},"end":{"row":173,"column":65},"action":"remove","lines":["k_test_J1rq2oweQ1BmO8RHlCUZRJza003i0FODkS"],"id":13},{"start":{"row":173,"column":23},"end":{"row":173,"column":24},"action":"remove","lines":["p"]}],[{"start":{"row":173,"column":23},"end":{"row":173,"column":24},"action":"insert","lines":["รง"],"id":14}]]},"ace":{"folds":[],"scrolltop":2941,"scrollleft":0,"selection":{"start":{"row":173,"column":24},"end":{"row":173,"column":24},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":172,"state":"js-start","mode":"ace/mode/html"}},"timestamp":1567713643466}